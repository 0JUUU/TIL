# 하둡이란 ❔

아파치 재단의 오픈 소스

: 하나의 성능 좋은 컴퓨터를 이용하여 데이터를 처리하는 대신 ❗ (Scale-up)

⭐ 적당한 성능 컴퓨터 여러 대를 클러스터화 (**Scale-out**), 데이터: 클러스터에서 병렬로 동시에 처리

➡ 처리 속도를 높이는 것을 목적으로 하는 **분산처리**를 위한 오픈소스 프레임워크

### 구성 요소

: 4개의 주요 모듈로 구성

- Hadoop Common
    - 하둡의 다른 모듈을 지원하기 위한 공통 컴포넌트 모듈
- Hadoop HDFS
    - 분산저장을 처리하기 위한 모듈
    - 여러 개의 서버를 하나의 서버처럼 묶어서 데이터를 저장
- Hadoop YARN
    - 병렬처리를 위한 클러스터 자원관리 및 스케줄링 담당
- Hadoop Mapreduce
    - 분산되어 저장된 데이터를 병렬 처리할 수 있게 해주는 분산 처리 모듈
- Hadoop Ozone
    - 하둡을 위한 오브젝트 저장소

### 장▪단점

- 장점
    1. 오픈소스로 라이선스에 대한 비용 부담 🔽 
    2. 시스템 중단하지 않고, 장비의 추가가 용이 (Scale Out)
    3. 일부 장비에 장애가 발생하더라도 전체 시스템 사용성에 영향이 적음 (Fault tolerance)
    4. 저렴한 구축 비용과 비용 대비 빠른 데이터 처리
    5. 오프라인 배치 프로세싱에 최적화
- 단점
    1. HDFS에 저장된 데이터 변경 불가
    2. 실시간 데이터 분석 같이 신속하게 처리해야하는 작업에는 부적합
    3. 너무 많은 버전과 부실한 서포트
    4. 설정의 어려움

- 버전별 특징
    - 하둡 v1

        하둡의 기본 아키텍처 정립

        병렬처리 (맵리듀스) : 잡트래커와 태스트트래커가 담당

        분산저장 (HDFS) : 네임노드와 데이터노드가 담당하도록 구조 설정

        ➡ 병렬처리의 클러스터 자원관리 & 애플리케이션 라이프 사이클 관리를 잡트래거가 모두 담당 → 병목현상 발생

        - 

            ![Untitled](%E1%84%92%E1%85%A1%E1%84%83%E1%85%AE%E1%86%B8%E1%84%8B%E1%85%B5%E1%84%85%E1%85%A1%E1%86%AB%20%E2%9D%94%204ff09fb4506f47aa8d57c494a28f65db/Untitled.png)

            **분산저장**, **병렬처리** 프레임워크 정의

            분산저장 : 네임노드와 데이터노드가 처리

            네임노드 : 블록정보를 가지고 있는 메타데이터 관리, 데이터 노드 관리

            데이터노트 : 데이터를 블록 단위로 나누어서 저장

            ➡ 블록단위 데이터 : 복제 → 데이터 유실에 대비

            병렬처리 : 잡트래커와 태스크트래커가 처리

            잡트래커 : 전체 작업의 진행상황 관리, 자원 관리

            태스크트래커 : 실제 작업 처리

            : 병렬처리의 작업 단위 - 슬롯 (slot) 

            → 맵 슬롯, 리듀스 슬롯의 개수가 정해져 있고, 실행 시점에 역할이 정해지면 슬롯의 용도 변경 불가 ❗

             ⇒ 맵 작업 진행 : 리듀스 슬롯은 대기 상태 〰 클러스터 100% 활용 ❌

            **특징**

            - 분산저장, 병렬처리 프레임워크 정의
                - 분산저장(HDFS)
                - 병렬처리(MapReduce)
            - 클러스터당 최대 4000개의 노드 등록
            - 작업 처리를 슬롯(slot) 단위로 처리
                - 맵, 리듀스 슬롯을 구분하여 처리
    - 하둡 v2

        잡트래커의 병목현상 개선➡ YARN 아키텍처 도입

        잡트래커의 기능 분리 → 클러스터의 자원관리는 리소스 매니저 & 노드 매니저

                                           애플리케이션 라이프 사이클 관리는 마스터 & 컨테이너

        - 

            ![Untitled](%E1%84%92%E1%85%A1%E1%84%83%E1%85%AE%E1%86%B8%E1%84%8B%E1%85%B5%E1%84%85%E1%85%A1%E1%86%AB%20%E2%9D%94%204ff09fb4506f47aa8d57c494a28f65db/Untitled%201.png)

            ⭐ 잡트래커의 병목현상 제거 → YARN 아키텍처 도입❗ 

            YARN 아키텍처 : 잡트래커의 기능 분리

             ➡ 자원 관리 : 리소스 매니저 & 노드매니저 담당

             ➡ 애플리케이션 라이프 사이클 관리 : 애플리케이션 마스터 담당

             ➡ 작업 처리 : 컨테이너 담당

            : YARN 아키텍처 작업 처리 단위 = 컨테이너

            작업 제출 → 애플리케이션 마스터 생성 

            → 애플리케이션 마스터 리소스 매니저에 자원 요청 

            → 실제 작업을 담당하는 컨테이너 할당받아 작업 처리

            : 컨테이너 = 작업 요청 시 생성됨 & 완료 시 종료 ➡클러스터를 효율적으로 사용 ⭕

            **특징**

            - YARN 도입 → 병렬 처리 구조 변경
                - 클러스터 관리
                - 작업 관리
            - MR 와 Spark, Hive, Pig 등 다른 분산 처리 모델도 수행 가능
            - 클러스터당 1만개 이상의 노드 등록 가능
            - 작업 처리를 컨테이너 단위로 처리
    - 하둡 v3

        이레이져 코딩 도입 ➡ HDFS의 데이터 저장 효율성 증가

        YARN 타임라인 서비스 개선 

        쉘스크립트 재작성 ➡ 안정성 🔼 

        맵리듀스 처리에 네이티브 프로그램 도입 : 성능 개선

        - 

            ![Untitled](%E1%84%92%E1%85%A1%E1%84%83%E1%85%AE%E1%86%B8%E1%84%8B%E1%85%B5%E1%84%85%E1%85%A1%E1%86%AB%20%E2%9D%94%204ff09fb4506f47aa8d57c494a28f65db/Untitled%202.png)

            ⭐ 이레이져 코딩, YARN 타임라인 서비스 v2 등 도입

            💬 하둡 v2까지 HDFS에서 **장애 복구**를 위해 **파일 복제 이용** 

            기본 복제 단위 3개 → 파일 1개 당 2개의 복제본 (∴ 1G 데이터 저장→3G 저장소 사용)

            ➡ 이레이져 코딩 : 패리티 블록 활용 〰 1G 데이터 저장에 1.5G 디스크 사용 

            ⇒ 저장소 효율 증가❗ 

            ➕ YARN 타임라인 서버 개선

            ➕ 하둡 v1부터 사용하던 쉘스크립트 다시 작성 → 버그 해결

            ➕ 네이티브 코드 수정 ➡ 셔플 단계의 처리 속도 증가 

            ➕ Java 8 지원

            ➕ 고가용성 → 2개 이상의 네임노드를 지원

            **특징**

            - 이레이져 코딩 도입

                ▫ 기존의 블록 복제 (Replication) 대체 방식 ➡ HDFS 사용량 감소

            - YARN 타임라인 서비스 v2 도입

                ▫ 기존 타임라인 서비스보다 많은 정보 확인 가능

            - 스크립트 재작성 및 이해하기 쉬운 형태로 수정
            - JAVA 8 지원
            - 네이티브 코드 최적화
            - 고가용성을 위해 2개 이상의 네임노드 지원

                ▫ 하나만 추가 가능했던 스탠바이 노드 → 여러 개 지원 가능한 스탠바이 노드로

            - Ozone 추가

                ▫ 오브젝트 저장소 추가